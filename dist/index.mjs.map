{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import type { VitePluginVanJSPluginOptions, VitePluginVanJSPlugin } from './types';\n// import './types.d.ts';\n\nconst VitePluginVanJS = (config: VitePluginVanJSPluginOptions = {}) => {\n  const defaultEntries = ['src/entry-client', 'src/entry-server'];\n  const entries = [...defaultEntries, ...(config.entries || [])];\n\n  return {\n    name: 'vanjs',\n    enforce: 'pre',\n    transform(code: string, id?: string) {\n      if (!id || !entries.some((entry) => id.includes(entry))) {\n        return { code, map: null };\n      }\n\n      // Inject code to make 'van' available in server environment\n      const result = `// vite-loader\n// import v from \"vite-plugin-vanjs/setup\";\nimport v from \"@vanjs/setup\";\nimport { registerEnv } from \"mini-van-plate/shared\";\nregisterEnv(v);\n${code}`;\n      return { code: result, map: null };\n    }\n  } satisfies VitePluginVanJSPlugin;\n}\n\nexport default VitePluginVanJS;\n"],"names":["VitePluginVanJS","config","entries","code","id","entry"],"mappings":"AAGA,MAAMA,IAAkB,CAACC,IAAuC,OAAO;AAE/D,QAAAC,IAAU,CAAC,GADM,CAAC,oBAAoB,kBAAkB,GAC1B,GAAID,EAAO,WAAW,EAAG;AAEtD,SAAA;AAAA,IACL,MAAM;AAAA,IACN,SAAS;AAAA,IACT,UAAUE,GAAcC,GAAa;AAC/B,aAAA,CAACA,KAAM,CAACF,EAAQ,KAAK,CAACG,MAAUD,EAAG,SAASC,CAAK,CAAC,IAC7C,EAAE,MAAAF,GAAM,KAAK,KAAK,IAUpB,EAAE,MANM;AAAA;AAAA;AAAA;AAAA;AAAA,EAKnBA,CAAI,IACuB,KAAK,KAAK;AAAA,IAAA;AAAA,EAErC;AACF;"}