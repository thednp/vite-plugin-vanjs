{"version":3,"file":"index.cjs","sources":["../src/index.ts"],"sourcesContent":["import type { VitePluginVanJSPluginOptions, VitePluginVanJSPlugin } from './types';\n// import './types.d.ts';\n\nconst VitePluginVanJS = (config: VitePluginVanJSPluginOptions = {}) => {\n  const defaultEntries = ['src/entry-client', 'src/entry-server'];\n  const entries = [...defaultEntries, ...(config.entries || [])];\n\n  return {\n    name: 'vanjs',\n    enforce: 'pre',\n    transform(code: string, id?: string) {\n      if (!id || !entries.some((entry) => id.includes(entry))) {\n        return { code, map: null };\n      }\n\n      // Inject code to make 'van' available in server environment\n      const result = `// vite-loader\n// import v from \"vite-plugin-vanjs/setup\";\nimport v from \"@vanjs/setup\";\nimport { registerEnv } from \"mini-van-plate/shared\";\nregisterEnv(v);\n${code}`;\n      return { code: result, map: null };\n    }\n  } satisfies VitePluginVanJSPlugin;\n}\n\nexport default VitePluginVanJS;\n"],"names":["VitePluginVanJS","config","entries","code","id","entry"],"mappings":"aAGA,MAAMA,EAAkB,CAACC,EAAuC,KAAO,CAE/D,MAAAC,EAAU,CAAC,GADM,CAAC,mBAAoB,kBAAkB,EAC1B,GAAID,EAAO,SAAW,EAAG,EAEtD,MAAA,CACL,KAAM,QACN,QAAS,MACT,UAAUE,EAAcC,EAAa,CAC/B,MAAA,CAACA,GAAM,CAACF,EAAQ,KAAMG,GAAUD,EAAG,SAASC,CAAK,CAAC,EAC7C,CAAE,KAAAF,EAAM,IAAK,IAAK,EAUpB,CAAE,KANM;AAAA;AAAA;AAAA;AAAA;AAAA,EAKnBA,CAAI,GACuB,IAAK,IAAK,CAAA,CAErC,CACF"}